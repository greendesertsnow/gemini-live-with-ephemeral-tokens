# Ephemeral Token Configuration for Gemini Live API
# Copy this file to .env.local and configure according to your needs

# =============================================================================
# REQUIRED - Authentication Configuration
# =============================================================================

# PocketBase URL for user authentication (client-side accessible)
NEXT_PUBLIC_POCKETBASE_URL=http://localhost:8090

# =============================================================================
# REQUIRED - Gemini API Configuration
# =============================================================================

# Your Gemini API key (KEEP SECURE - only used on backend)
GEMINI_API_KEY=your_gemini_api_key_here

# Gemini model to use for Live API (client-side accessible)
NEXT_PUBLIC_GEMINI_MODEL=models/gemini-2.0-flash-exp

# =============================================================================
# API Configuration
# =============================================================================

# Base endpoint for token API calls (client-side)
NEXT_PUBLIC_TOKEN_API_ENDPOINT=/api/auth

# Timeout for API calls in milliseconds
TOKEN_API_TIMEOUT=30000

# Number of retry attempts for failed API calls
TOKEN_API_RETRIES=3

# =============================================================================
# Token Settings
# =============================================================================

# Default token expiration time in minutes (1-30)
TOKEN_DEFAULT_EXPIRATION_MINUTES=30

# Default number of uses per token (1-5)
TOKEN_DEFAULT_USES=1

# Maximum allowed token expiration time in minutes
TOKEN_MAX_EXPIRATION_MINUTES=30

# Maximum allowed uses per token
TOKEN_MAX_USES=5

# Minutes before expiration to automatically refresh token
TOKEN_REFRESH_THRESHOLD_MINUTES=5

# =============================================================================
# Security Settings
# =============================================================================

# Enable rate limiting for token requests
TOKEN_ENABLE_RATE_LIMIT=true

# Rate limit window in minutes
TOKEN_RATE_LIMIT_WINDOW=60

# Maximum requests per rate limit window
TOKEN_RATE_LIMIT_MAX=10

# Require HTTPS for all token requests (auto-enabled in production)
TOKEN_REQUIRE_HTTPS=false

# Comma-separated list of allowed origins
TOKEN_ALLOWED_ORIGINS=http://localhost:3000,https://localhost:3000

# Maximum request size in bytes
TOKEN_MAX_REQUEST_SIZE=10240

# Enable audit logging
TOKEN_ENABLE_AUDIT_LOG=true

# =============================================================================
# Connection Settings
# =============================================================================

# Maximum connection retry attempts
TOKEN_CONNECTION_MAX_RETRIES=3

# Base delay between connection retries in milliseconds (exponential backoff)
TOKEN_CONNECTION_RETRY_DELAY=1000

# Enable automatic reconnection on connection loss
TOKEN_AUTO_RECONNECT=true

# Connection timeout in milliseconds
TOKEN_CONNECTION_TIMEOUT=30000

# =============================================================================
# Storage Settings
# =============================================================================

# Enable token persistence in localStorage
TOKEN_ENABLE_PERSISTENCE=true

# Maximum number of tokens to cache
TOKEN_MAX_CACHE_SIZE=50

# Cache eviction time in minutes
TOKEN_CACHE_EVICTION_MINUTES=60

# Prefix for stored tokens in localStorage
TOKEN_STORAGE_PREFIX=gemini_tokens_

# =============================================================================
# Session Settings
# =============================================================================

# Maximum active tokens per session
TOKEN_MAX_TOKENS_PER_SESSION=3

# Session timeout in minutes
TOKEN_SESSION_TIMEOUT_MINUTES=60

# Cleanup interval in minutes
TOKEN_CLEANUP_INTERVAL_MINUTES=5

# Enable session resumption across page reloads
TOKEN_ENABLE_SESSION_RESUMPTION=true

# =============================================================================
# Development Settings
# =============================================================================

# Enable detailed debug logging (auto-enabled in development)
TOKEN_ENABLE_DEBUG_LOGGING=false

# Enable development tools (auto-enabled in development)
TOKEN_ENABLE_DEV_TOOLS=false

# Use mock tokens for testing (development only)
TOKEN_MOCK_TOKENS=false

# Skip validation for testing (development only - DANGEROUS)
TOKEN_SKIP_VALIDATION=false

# =============================================================================
# Production Deployment Notes
# =============================================================================

# For production deployment:
# 1. Set NODE_ENV=production
# 2. Use a secure GEMINI_API_KEY
# 3. Set TOKEN_REQUIRE_HTTPS=true
# 4. Configure TOKEN_ALLOWED_ORIGINS with your actual domain
# 5. Consider reducing TOKEN_RATE_LIMIT_MAX for better security
# 6. Set TOKEN_ENABLE_DEBUG_LOGGING=false
# 7. Ensure proper HTTPS setup for your domain

# =============================================================================
# Vercel/Netlify Deployment
# =============================================================================

# For Vercel deployment, add these environment variables in your dashboard:
# - GEMINI_API_KEY (keep secret)
# - TOKEN_ALLOWED_ORIGINS (set to your domain)
# - NODE_ENV=production (usually auto-set)

# For Netlify deployment, add these in your site settings:
# - GEMINI_API_KEY (keep secret)
# - TOKEN_ALLOWED_ORIGINS (set to your domain)
# - NODE_ENV=production (usually auto-set)